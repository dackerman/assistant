import type { ConversationSnapshot, ConversationStreamEvent } from '@/types/streaming'

const ISO = (value: string) => new Date(value).toISOString()

const BASE_TIME = '2025-09-19T08:15:00Z'

export const bashSnapshot: ConversationSnapshot = {
  conversation: {
    id: 9,
    title: 'New Conversation',
    createdAt: ISO(BASE_TIME),
    updatedAt: ISO(BASE_TIME),
  },
  messages: [],
}

export const bashEvents: ConversationStreamEvent[] = [
  {
    type: 'message-created',
    message: {
      id: 301,
      conversationId: 9,
      role: 'user',
      content: 'list the repository files',
      createdAt: ISO('2025-09-19T08:15:02Z'),
      updatedAt: ISO('2025-09-19T08:15:02Z'),
      status: 'queued',
      promptId: null,
      model: null,
      blocks: [],
    },
  },
  {
    type: 'message-updated',
    message: {
      id: 301,
      conversationId: 9,
      role: 'user',
      content: 'list the repository files',
      createdAt: ISO('2025-09-19T08:15:02Z'),
      updatedAt: ISO('2025-09-19T08:15:02.500Z'),
      status: 'processing',
      promptId: null,
      model: null,
      blocks: [],
    },
  },
  {
    type: 'message-created',
    message: {
      id: 302,
      conversationId: 9,
      role: 'assistant',
      content: null,
      createdAt: ISO('2025-09-19T08:15:02.600Z'),
      updatedAt: ISO('2025-09-19T08:15:02.600Z'),
      status: 'processing',
      promptId: null,
      model: null,
      blocks: [],
    },
  },
  {
    type: 'prompt-started',
    prompt: {
      id: 801,
      conversationId: 9,
      messageId: 302,
      status: 'streaming',
      model: 'claude-sonnet-4-20250514',
      createdAt: ISO('2025-09-19T08:15:02.700Z'),
      completedAt: null,
      systemMessage: null,
      error: null,
    },
  },
  {
    type: 'block-start',
    promptId: 801,
    messageId: 302,
    blockId: 5001,
    blockType: 'tool_use',
  },
  {
    type: 'tool-call-started',
    toolCall: {
      id: 901,
      apiToolCallId: 'toolu_bash_001',
      blockId: 5001,
      promptId: 801,
      name: 'bash',
      state: 'executing',
      output: null,
      input: { command: 'ls -1' },
      error: null,
      createdAt: ISO('2025-09-19T08:15:03Z'),
      updatedAt: ISO('2025-09-19T08:15:03Z'),
      completedAt: null,
      providerExecuted: true,
      dynamic: false,
      startedAt: ISO('2025-09-19T08:15:03Z'),
      timeoutAt: null,
    },
    input: { command: 'ls -1' },
  },
  {
    type: 'tool-call-progress',
    toolCallId: 901,
    blockId: 5001,
    output: 'README.md\n',
  },
  {
    type: 'tool-call-progress',
    toolCallId: 901,
    blockId: 5001,
    output: 'package.json\n',
  },
  {
    type: 'tool-call-completed',
    toolCall: {
      id: 901,
      apiToolCallId: 'toolu_bash_001',
      blockId: 5001,
      promptId: 801,
      name: 'bash',
      state: 'completed',
      output: 'README.md\npackage.json\n',
      input: { command: 'ls -1' },
      error: null,
      createdAt: ISO('2025-09-19T08:15:03Z'),
      updatedAt: ISO('2025-09-19T08:15:05Z'),
      completedAt: ISO('2025-09-19T08:15:05Z'),
      providerExecuted: true,
      dynamic: false,
      startedAt: ISO('2025-09-19T08:15:03Z'),
      timeoutAt: null,
    },
  },
  {
    type: 'block-start',
    promptId: 801,
    messageId: 302,
    blockId: 5002,
    blockType: 'text',
  },
  {
    type: 'block-delta',
    promptId: 801,
    messageId: 302,
    blockId: 5002,
    content: 'Here are the repository files:\n',
  },
  {
    type: 'block-delta',
    promptId: 801,
    messageId: 302,
    blockId: 5002,
    content: '- README.md\n- package.json',
  },
  {
    type: 'block-end',
    promptId: 801,
    messageId: 302,
    blockId: 5002,
  },
  {
    type: 'prompt-completed',
    prompt: {
      id: 801,
      conversationId: 9,
      messageId: 302,
      status: 'completed',
      model: 'claude-sonnet-4-20250514',
      createdAt: ISO('2025-09-19T08:15:02.700Z'),
      completedAt: ISO('2025-09-19T08:15:06Z'),
      systemMessage: null,
      error: null,
    },
  },
  {
    type: 'message-updated',
    message: {
      id: 302,
      conversationId: 9,
      role: 'assistant',
      content: 'Here are the repository files:\n- README.md\n- package.json',
      createdAt: ISO('2025-09-19T08:15:02.600Z'),
      updatedAt: ISO('2025-09-19T08:15:06.100Z'),
      status: 'completed',
      promptId: 801,
      model: 'claude-sonnet-4-20250514',
      blocks: [
        {
          id: 5002,
          messageId: 302,
          type: 'text',
          content: 'Here are the repository files:\n- README.md\n- package.json',
          order: 1,
          metadata: null,
        },
      ],
    },
  },
  {
    type: 'conversation-updated',
    conversation: {
      id: 9,
      title: 'List Repository Files',
      updatedAt: ISO('2025-09-19T08:15:06.200Z'),
    },
  },
]
